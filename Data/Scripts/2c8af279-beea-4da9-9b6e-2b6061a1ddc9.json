{
    "type": "script",
    "id": "2c8af279-beea-4da9-9b6e-2b6061a1ddc9",
    "name": "Interact with Wall Cabinet",
    "sceneId": "44d6c76f-13a2-419f-b675-4fe3a00f8f17",
    "propId": "98bcbe04-1a3f-4c9b-920b-3eedf5f69298",
    "actorId": null,
    "trigger": {
        "type": "triggers.interact",
        "name": "Interact"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "c4d59263-380b-430f-8a8e-fec8fe8a70ee",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.showMenu",
                    "id": "9bb257bb-d2e7-4cf7-8508-21b6833e4310",
                    "options": [
                        {
                            "type": "options.text",
                            "id": "59788059-c4f3-4840-85aa-8ae0dccd7e91",
                            "text": "Look at the Wall Cabinet",
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "f8ac0649-b735-4a70-8894-d8de27d39806",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Looks like a medicine cabinet. Is that healing potions I see in there?",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "3df60b4f-de5b-4b5d-9875-ac1add339153",
                            "text": "Examine the Lock",
                            "nodes": [
                                {
                                    "type": "nodes.changeTags",
                                    "id": "4dcc0e40-2e74-493e-ada8-cd6f4e326d4f",
                                    "scope": "target",
                                    "scopeId": "2dafe33c-8486-4773-8f7c-5925c3ef4144",
                                    "scopeFilterId": "cf824b0f-5af6-4a19-bac8-552a2a1bbebf",
                                    "tagsToAdd": "examinedLock",
                                    "tagsToRemove": null
                                },
                                {
                                    "id": "3f661360-5ee2-45e3-862e-d8e42d38c69b",
                                    "type": "nodes.skillBranch",
                                    "skill": "Perception",
                                    "target": "40",
                                    "success": {
                                        "type": "nodes.block",
                                        "nodes": [
                                            {
                                                "type": "nodes.branch",
                                                "sections": [
                                                    {
                                                        "type": "nodes.branchSection",
                                                        "expression": {
                                                            "type": "expressions.inInventory",
                                                            "propId": "1d6a6851-2078-498c-b9de-8e72576a462b",
                                                            "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                            "has": true
                                                        },
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "b6cf8d41-5798-436e-a378-58c1c8a509fa",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Looks like a Marple class lock. Good thing I came prepared with my Houdini 42.",
                                                                "emotion": "0",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "nodes.branchSection",
                                                        "expression": null,
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "0d54cd6c-aa04-4084-b6a6-18f4baf3df90",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Looks like a Marple class lock - I think I'm going to need a Houdini 42 to crack this case.",
                                                                "emotion": "2",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "failure": {
                                        "type": "nodes.block",
                                        "nodes": [
                                            {
                                                "type": "nodes.speak",
                                                "id": "3133cdec-1ed8-4871-a098-2c9cf6620c73",
                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                "actorId2": null,
                                                "text": "Right... it's a lock... So far, so good.",
                                                "emotion": "0",
                                                "emotion2": "0",
                                                "device": "0",
                                                "device2": "0"
                                            },
                                            {
                                                "type": "nodes.speak",
                                                "id": "d66504bb-d1ba-4ee2-b040-7896f00eef5a",
                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                "actorId2": null,
                                                "text": "I really need to work on my lock ID skills.",
                                                "emotion": "2",
                                                "emotion2": "0",
                                                "device": "0",
                                                "device2": "0"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "actor",
                                    "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "scopeFilterId": null,
                                    "tags": "ReadAL",
                                    "has": true
                                },
                                "right": {
                                    "type": "expressions.and",
                                    "left": {
                                        "type": "expressions.inTags",
                                        "scope": "target",
                                        "scopeId": "2dafe33c-8486-4773-8f7c-5925c3ef4144",
                                        "scopeFilterId": "cf824b0f-5af6-4a19-bac8-552a2a1bbebf",
                                        "tags": "examinedLock",
                                        "has": false
                                    },
                                    "right": {
                                        "type": "expressions.inTags",
                                        "scope": "target",
                                        "scopeId": null,
                                        "scopeFilterId": null,
                                        "tags": "locked",
                                        "has": true
                                    }
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "bbdd3b54-515b-4083-9b3f-d3c8a2b450f9",
                            "text": "Open the Wall Cabinet",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "locked",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "7c0093a9-cedd-4092-bcd7-38326b064bb2",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "It's locked. Maybe they knew I was coming. ",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "gotpotion",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "576e58fd-284d-4dd0-8ddb-d9308e20b0d6",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "text": "I don't dare risk taking more than one... At least, not until a day or two has passed. Maybe they keep this cabinet stocked.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "865d8609-a28a-46a2-97dc-748d47087175",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I'll just snag one of those healing potions, for later...",
                                                    "emotion": "1",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.changePropVisibility",
                                                    "id": "4e600056-c1f2-4bd6-a6d4-d47aec9b999f",
                                                    "propId": "98bcbe04-1a3f-4c9b-920b-3eedf5f69298",
                                                    "sceneId": "44d6c76f-13a2-419f-b675-4fe3a00f8f17",
                                                    "status": "Opening",
                                                    "wait": true
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "ReachOut"
                                                },
                                                {
                                                    "type": "nodes.wait",
                                                    "waitForSeconds": "0.5"
                                                },
                                                {
                                                    "type": "nodes.changeInventory",
                                                    "id": "cbb69911-695e-4db1-ac1a-dda03081f5bc",
                                                    "propId": "126e380b-ceda-4884-994f-ca03cca884b8",
                                                    "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                    "change": "1",
                                                    "count": 1,
                                                    "notify": true
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "8b2696a5-c0d5-49ac-a514-1d1479c992fa",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "gotpotion",
                                                    "tagsToRemove": null
                                                },
                                                {
                                                    "type": "nodes.wait",
                                                    "waitForSeconds": "0.5"
                                                },
                                                {
                                                    "type": "nodes.changePropVisibility",
                                                    "id": "f7de02d4-000c-4cbc-88f0-30b8216be281",
                                                    "propId": "98bcbe04-1a3f-4c9b-920b-3eedf5f69298",
                                                    "sceneId": "44d6c76f-13a2-419f-b675-4fe3a00f8f17",
                                                    "status": "Closing",
                                                    "wait": true
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "ea057c19-ae31-42d6-9eff-3c2f7efc889f",
                            "text": "Pick the Lock",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.variableComparison",
                                                "variableScope": "global",
                                                "variableName": "ego.haslockpick",
                                                "operator": "eq",
                                                "compareTo": "true",
                                                "sceneId": "ed2b858e-927a-44b9-86ee-4d3fe4dcfc33",
                                                "propId": null
                                            },
                                            "nodes": [
                                                {
                                                    "id": "79334410-ff83-4bab-ac46-8029d1dc78c1",
                                                    "type": "nodes.skillBranch",
                                                    "skill": "Tool Use",
                                                    "target": "40",
                                                    "success": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.playSoundEffect",
                                                                "soundEffectName": "lockpick_success.wav",
                                                                "wait": true
                                                            },
                                                            {
                                                                "type": "nodes.invokeScript",
                                                                "id": "674e719a-d3cd-4660-bb6f-fe0bae0b9ba9",
                                                                "scriptId": "f214e893-43e1-4ba8-bb48-5ad1177e61de",
                                                                "entryPointId": "",
                                                                "currentScope": "Scenes",
                                                                "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                                "currentActorId": null,
                                                                "currentStoryEventId": null,
                                                                "currentPropId": null
                                                            }
                                                        ]
                                                    },
                                                    "failure": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.playSoundEffect",
                                                                "soundEffectName": "lockpick_failure.wav",
                                                                "wait": true
                                                            },
                                                            {
                                                                "type": "nodes.changeTags",
                                                                "id": "9e34089f-2b6a-4d75-8b5f-c64ef0123196",
                                                                "scope": "script",
                                                                "scopeId": null,
                                                                "scopeFilterId": null,
                                                                "tagsToAdd": "lockpickattempted",
                                                                "tagsToRemove": null
                                                            },
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "dc0f532b-45c6-438b-98cf-949e3d09c74f",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "This lock is tiny, and I'm not experienced enough with my tools to pick it!",
                                                                "emotion": "2",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "5e9430ca-ce82-4127-93e8-3fa91ab29d8b",
                                                    "scriptId": "a2f2b3a1-0fdd-4797-89ce-3815d7f3f8c4",
                                                    "entryPointId": "",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "target",
                                "scopeId": "6d7beb0c-4bcf-410b-aa8d-6bc964716df2",
                                "scopeFilterId": "7fce1c28-cd5a-413f-9acd-fbf3704f5373",
                                "tags": "locked",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "4f8dd204-9b6c-4023-9956-8bc884d685b9",
                            "text": "Look for Traps",
                            "nodes": [
                                {
                                    "id": "1754e5ca-a4ca-40a7-8346-9320ee13df3c",
                                    "type": "nodes.skillBranch",
                                    "skill": "Perception",
                                    "target": "1",
                                    "success": {
                                        "type": "nodes.block",
                                        "nodes": []
                                    },
                                    "failure": {
                                        "type": "nodes.block",
                                        "nodes": []
                                    }
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "4919a823-64b3-4f86-8c79-6c6ec679b48b",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "checktrap",
                                    "tagsToRemove": null
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "10054c18-27ec-45c4-8504-ba060eac7185",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Doesn't appear to be trapped. The teachers don't want to risk hurting themselves!",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": "794c33ac-c054-4689-b094-50df3c088db0",
                                    "scopeFilterId": "44d6c76f-13a2-419f-b675-4fe3a00f8f17",
                                    "tags": "checktrap",
                                    "has": false
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": "794c33ac-c054-4689-b094-50df3c088db0",
                                    "scopeFilterId": "44d6c76f-13a2-419f-b675-4fe3a00f8f17",
                                    "tags": "locked",
                                    "has": true
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "3",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "5fc5f865-9a9d-44ef-8317-fa0ba1b7ecc6",
                            "text": "Sense Magic on the Wall Cabinet",
                            "nodes": [
                                {
                                    "type": "nodes.invokeScript",
                                    "id": "c63822f5-2ecf-4769-8e50-23c840dec5d0",
                                    "scriptId": "533e1ce1-13d3-439f-8544-dbdf808d30c4",
                                    "entryPointId": "c4d59263-380b-430f-8a8e-fec8fe8a70ee",
                                    "currentScope": "Scenes",
                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                    "currentActorId": null,
                                    "currentStoryEventId": null,
                                    "currentPropId": null
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "da9acf53-cf56-46c1-b728-49848da80025",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "However, the healing potions inside the cabinet are slightly magical. That explains why they work so well.",
                                    "emotion": "1",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "actor",
                                    "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "scopeFilterId": null,
                                    "tags": "sensemagic",
                                    "has": true
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "sensedMagic",
                                    "has": false
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "3",
                            "ExitMenu": false
                        }
                    ],
                    "AutoAddDone": true,
                    "Unique": false
                }
            ]
        }
    ]
}