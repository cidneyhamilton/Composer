{
    "type": "script",
    "id": "2e0b56dd-4db1-4c5f-939e-9de7134dc189",
    "name": "Interact with Exit To Antechamber",
    "sceneId": "e5fc358f-ecf7-41f2-aafa-77ee40ee3829",
    "propId": "714ad8af-35ff-4bdc-a1c3-6d7dfd768502",
    "actorId": null,
    "trigger": {
        "type": "triggers.interact",
        "name": "Interact"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "8c0a3e95-a185-4bef-96a7-be4d69d6fe21",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.showMenu",
                    "id": "1eedfcf8-028d-4cd3-b52e-c89a088d48e2",
                    "options": [
                        {
                            "type": "options.text",
                            "id": "3ed4c825-aedc-4693-8692-10212c8102cc",
                            "text": "Examine the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "36500fbb-1586-4722-8898-7dc1ca05d0b9",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "This gate looks much like all the other ones. They must come from the same rusty old gate factory.",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "07c67b76-e3f7-4afb-9ff2-6838a5f3b36e",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "At least I've oiled the hinges, so it shouldn't be as loud or hard to open.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "rusty",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "58a1ad74-5a18-4c78-b902-2ae70634f16d",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "The hinges on this gate are really rusty. If I try to open it like this, I'll wake up every monster and drunk in the wine cellar.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "locked",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "ca70da68-bdcb-42da-b452-6b1bb2912695",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Interesting - the gate is locked, and the lock looks different from the other ones I've seen down here.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": "1",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "71ac3508-16ee-4f84-940b-617888395510",
                            "text": "Listen at the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "hasListenedToday",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "b5f3bc8d-b2ff-4a4f-a820-1c675db8a177",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "This is boring.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "8d158aec-3372-4173-b769-573763c25393",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "hasListenedToday",
                                                    "tagsToRemove": null
                                                },
                                                {
                                                    "type": "nodes.incrementTime",
                                                    "id": "4908e340-011f-487d-8e4d-d440f3d72319",
                                                    "days": 0,
                                                    "hours": 0,
                                                    "minutes": "5"
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "KneelDown",
                                                    "wait": true
                                                },
                                                {
                                                    "id": "29e884f8-69e1-40ea-ab4a-57d2261fe37a",
                                                    "type": "nodes.skillBranch",
                                                    "skill": "Perception",
                                                    "target": "25",
                                                    "success": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "a3e597c7-5a6c-45c3-8275-9cad026cdbe7",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Okay, I might be hearing something with claws moving around in the next room. Maybe more than one... I'd better be careful.",
                                                                "emotion": "0",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    },
                                                    "failure": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "1aa5f31f-496e-4af5-9444-77274d8b759a",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "I can't make out any sounds right now.",
                                                                "emotion": "0",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    },
                                                    "notify": true
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "KneelUp",
                                                    "wait": true
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "d4974a20-fe19-40c4-b908-e4315535772d",
                            "text": "Pick the Lock",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "hasPickedLockToday",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.branch",
                                                    "sections": [
                                                        {
                                                            "type": "nodes.branchSection",
                                                            "expression": {
                                                                "type": "expressions.variableComparison",
                                                                "variableScope": "global",
                                                                "variableName": "ego.haslockpick",
                                                                "operator": "eq",
                                                                "compareTo": "true",
                                                                "sceneId": "9b06cdb4-6d47-4e07-8501-3cb9c5792c09",
                                                                "propId": null
                                                            },
                                                            "nodes": [
                                                                {
                                                                    "type": "nodes.playAnimation",
                                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                    "animationName": "ReachOut"
                                                                },
                                                                {
                                                                    "type": "nodes.incrementTime",
                                                                    "id": "647c1fcd-bdab-4858-bb46-1c328a94e4ce",
                                                                    "days": 0,
                                                                    "hours": 0,
                                                                    "minutes": "5"
                                                                },
                                                                {
                                                                    "id": "dd94443a-8a9d-45f5-beb5-26bf376b07b0",
                                                                    "type": "nodes.skillBranch",
                                                                    "skill": "Tool Use",
                                                                    "target": "30",
                                                                    "success": {
                                                                        "type": "nodes.block",
                                                                        "nodes": [
                                                                            {
                                                                                "type": "nodes.playSoundEffect",
                                                                                "soundEffectName": "lockpick_success.wav",
                                                                                "wait": true
                                                                            },
                                                                            {
                                                                                "type": "nodes.changeTags",
                                                                                "id": "6dd4ffe0-c04b-4fa2-9d76-2f9edb0cd3d5",
                                                                                "scope": "target",
                                                                                "scopeId": null,
                                                                                "scopeFilterId": null,
                                                                                "tagsToRemove": "locked"
                                                                            },
                                                                            {
                                                                                "type": "nodes.speak",
                                                                                "id": "2788c4bc-857c-42d7-872d-e331290cd7e4",
                                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                                "actorId2": null,
                                                                                "text": "Got it!",
                                                                                "emotion": "1",
                                                                                "emotion2": "0",
                                                                                "device": "0",
                                                                                "device2": "0"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "failure": {
                                                                        "type": "nodes.block",
                                                                        "nodes": [
                                                                            {
                                                                                "type": "nodes.playSoundEffect",
                                                                                "soundEffectName": "lockpick_failure.wav",
                                                                                "wait": true
                                                                            },
                                                                            {
                                                                                "type": "nodes.speak",
                                                                                "id": "982295a0-f0f1-40d6-a22d-e2e4b1f90f5a",
                                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                                "actorId2": null,
                                                                                "text": "This is a really complicated lock. It's almost as if someone didn't want beginning Rogues to get into the next chamber.",
                                                                                "emotion": "2",
                                                                                "emotion2": "0",
                                                                                "device": "0",
                                                                                "device2": "0"
                                                                            },
                                                                            {
                                                                                "type": "nodes.changeTags",
                                                                                "id": "351d7918-6860-487e-abca-7ae06fe8653b",
                                                                                "scope": "target",
                                                                                "scopeId": "fb939020-144d-40f1-9b58-6403e5d9cedf",
                                                                                "scopeFilterId": "9b06cdb4-6d47-4e07-8501-3cb9c5792c09",
                                                                                "tagsToAdd": "hasPickedLockToday",
                                                                                "tagsToRemove": null
                                                                            }
                                                                        ]
                                                                    },
                                                                    "notify": true
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "nodes.branchSection",
                                                            "expression": null,
                                                            "nodes": [
                                                                {
                                                                    "type": "nodes.speak",
                                                                    "id": "a8703ec0-8d8d-41ea-bd9f-003a255924cc",
                                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                    "actorId2": null,
                                                                    "text": "If only I'd brought a lockpick...",
                                                                    "emotion": "2",
                                                                    "emotion2": "0",
                                                                    "device": "0",
                                                                    "device2": "0"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "ea4ecf5d-1ff6-4a12-89e5-a755f2f1b316",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "text": "This area is too dangerous for me to waste more time practicing lockpicking. That's what the Lock Room is for.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "target",
                                "scopeId": null,
                                "scopeFilterId": null,
                                "tags": "locked",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "8c2fab74-a838-4eb3-a346-2f300484d214",
                            "text": "Open the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.playAnimation",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "animationName": "ReachOut",
                                    "wait": true
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "4e6c9a71-eaee-4d61-b0c8-8c4812fb7b0c",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "An oily door is a quiet door.",
                                                    "emotion": "1",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "wooden_door_opening.wav",
                                                    "wait": false
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "WineCellarDoor.wav",
                                                    "wait": false
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.changeScene",
                                    "sceneId": "b403b96f-e954-4aa2-948b-9fdd998bc395",
                                    "spawnId": "79d330bc-6602-44bf-b617-d5a0c9906834",
                                    "fadeTime": 2
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "target",
                                "scopeId": null,
                                "scopeFilterId": null,
                                "tags": "locked",
                                "has": false
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "428064a2-8204-4ee2-919d-03392f7a4758",
                            "text": "Oil the Hinges",
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "7de7fcd6-8522-456a-b9c8-094bb54df71e",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Oiling this gate might make it easier to sneak into the next room.",
                                    "emotion": "1",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inInventory",
                                                "propId": "fcebe2a5-5808-486b-b633-ebc832524930",
                                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "42aee9d1-cab4-4036-8979-5674a5a3a987",
                                                    "scriptId": "e5a82559-e549-4aa7-a669-cf0f8abbaef4",
                                                    "entryPointId": "8c0a3e95-a185-4bef-96a7-be4d69d6fe21",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "0d6dc747-cc0b-42b6-8866-17eea1b36715",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "oiled",
                                                    "tagsToRemove": null
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "44616c05-5c48-4a9e-9bbd-fb1dbafedef2",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "If only I had some oil.",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "oiled",
                                    "has": false
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "rusty",
                                    "has": true
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "a9d4cbe7-8824-4b60-9242-43917d8ef52a",
                            "text": "Sense Magic",
                            "nodes": [
                                {
                                    "type": "nodes.invokeScript",
                                    "id": "37f9f80f-f142-43a1-8c29-bb0d204f0ab9",
                                    "scriptId": "533e1ce1-13d3-439f-8544-dbdf808d30c4",
                                    "entryPointId": "45297c9c-6423-46b4-b43d-ff07dfe27eac",
                                    "currentScope": "Scenes",
                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                    "currentActorId": null,
                                    "currentStoryEventId": null,
                                    "currentPropId": null
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "actor",
                                "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                "scopeFilterId": null,
                                "tags": "SenseMagic",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": false
                        }
                    ],
                    "AutoAddDone": true,
                    "Unique": false
                }
            ]
        }
    ]
}