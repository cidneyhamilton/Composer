{
    "type": "script",
    "id": "69917bf5-b1ac-4266-b82c-9414e534cd53",
    "name": "Interact with Exit to Rack Room",
    "sceneId": "fa26d0aa-8fef-4e8b-8055-ee760fc7b13f",
    "propId": "5f06f5c0-abf0-45c3-b929-cf29145558e0",
    "actorId": null,
    "trigger": {
        "type": "triggers.interact",
        "name": "Interact"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "2256d734-9558-4e7e-b6e8-a6970d34ee7e",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.showMenu",
                    "id": "39fee1fc-c7d7-4003-a108-6566ec3401c9",
                    "options": [
                        {
                            "type": "options.text",
                            "id": "85dc15e8-0ca9-463b-8832-321a03b851a5",
                            "text": "Examine the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "fc700c4c-0efd-4d16-ae66-f0491982a681",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Gate? - check. Metal? - check. Rust? - check. Shut? - check. Yep, this checks out like most of the gates in this place.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "ce583573-5d14-4d78-82b5-0db2f7fa00a7",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Gate? - check. Metal? - check. Shut? - check. Yep, this checks out like most of the gates in this place. At least I've oiled the hinges.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "53ef6e21-5bd0-4d64-abf0-1706fcb15e45",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "checked",
                                    "tagsToRemove": null
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": "1",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "d45bb1a3-ecf9-43eb-b70b-11991c71c76b",
                            "text": "Oil the Hinges",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inInventory",
                                                "propId": "fcebe2a5-5808-486b-b633-ebc832524930",
                                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "5685bebb-91e9-48f9-84e5-74e3c51a5aa9",
                                                    "scriptId": "e5a82559-e549-4aa7-a669-cf0f8abbaef4",
                                                    "entryPointId": "2256d734-9558-4e7e-b6e8-a6970d34ee7e",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "83d5800c-9b4f-425b-a537-4a4043497a92",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "oiled",
                                                    "tagsToRemove": null
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "54994f5e-9626-4ffa-bfe0-241311c30bb5",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Oil... yep, it's on my shopping list.",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "checked",
                                    "has": true
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "oiled",
                                    "has": false
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "3",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "a5f3a854-d2d9-486b-a8cc-35200f8423f1",
                            "text": "Open the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "firsttime",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "1b284608-aabe-4c89-b591-8f34d1f7d7c0",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "firsttime",
                                                    "tagsToRemove": null
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "4a855697-41a4-436c-be89-28c15443f31a",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "So what's hiding on the other side of this door?",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.playAnimation",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "animationName": "ReachOut",
                                    "wait": true
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "wooden_door_opening.wav",
                                                    "wait": true
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "WineCellarDoor.wav",
                                                    "wait": false
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "dfd3551e-c8dd-4a26-a276-f03441c0f7ea",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Ooh, that was loud. Maybe too loud... ",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.changeScene",
                                    "sceneId": "9b06cdb4-6d47-4e07-8501-3cb9c5792c09",
                                    "spawnId": "16442866-435b-4d8f-8a52-e8327f31fab9",
                                    "fadeTime": 2
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "d6d36305-303f-4871-a36c-d27abcaac165",
                            "text": "Listen at the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.incrementTime",
                                    "id": "87d68431-f2d6-45a5-9771-e4feafc3b06c",
                                    "days": 0,
                                    "hours": 0,
                                    "minutes": "5"
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "hasListenedToday",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "bba16d88-e526-47a1-944a-44b9e8c2dc85",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I've got better things to do than practice listening at these doors.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "id": "3bea6d71-06ec-42f4-8609-76d0a224fa1c",
                                                    "type": "nodes.skillBranch",
                                                    "skill": "Perception",
                                                    "target": "25",
                                                    "success": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "e1178bc1-811b-48a7-a6c8-a90adced8563",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "There's might be something moving around on the other side. Then again, I won't know for sure until I go in there.",
                                                                "emotion": "4",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    },
                                                    "failure": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "cbde186a-977c-4fe2-829c-7e5051199330",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Can't hear anything. Maybe I'm going deaf? ",
                                                                "emotion": "4",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            },
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "ba42957d-3362-4617-89eb-935d4bbe11d1",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Nope, I can still hear my own voice. That's a relief.",
                                                                "emotion": "1",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "27a417a3-8085-4ff7-aec5-39f9b673c4af",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "hasListenedToday",
                                    "tagsToRemove": null
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "0157ea9f-1d3c-4982-b2ce-f43f7036a23b",
                            "text": "Sense Magic",
                            "nodes": [
                                {
                                    "type": "nodes.invokeScript",
                                    "id": "ff99cc31-48ad-4cea-b29a-c52609619267",
                                    "scriptId": "533e1ce1-13d3-439f-8544-dbdf808d30c4",
                                    "entryPointId": "c4dfcf83-762c-4f7e-802a-816d9bf3b40e",
                                    "currentScope": "Scenes",
                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                    "currentActorId": null,
                                    "currentStoryEventId": null,
                                    "currentPropId": null
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "actor",
                                "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                "scopeFilterId": null,
                                "tags": "SenseMagic",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        }
                    ],
                    "AutoAddDone": true,
                    "Unique": false
                }
            ]
        }
    ]
}