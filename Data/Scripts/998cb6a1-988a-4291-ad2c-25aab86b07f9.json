{
    "type": "script",
    "id": "998cb6a1-988a-4291-ad2c-25aab86b07f9",
    "name": "Interact with Exit to Main",
    "sceneId": "b403b96f-e954-4aa2-948b-9fdd998bc395",
    "propId": "af11645b-9c6d-4f5e-9c89-6f980d62aedb",
    "actorId": null,
    "trigger": {
        "type": "triggers.interact",
        "name": "Interact"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "2af23058-e83d-42f7-9098-8ac6b9790c73",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.showMenu",
                    "id": "86075302-ebee-46f9-a8d4-f34d9a6e8a9e",
                    "options": [
                        {
                            "type": "options.text",
                            "id": "76f77b96-07d3-41f0-b393-1c9a669a84af",
                            "text": "Examine the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.changeTags",
                                    "id": "a8b05b35-cfb0-4e7b-914e-327bb19750cf",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "examined",
                                    "tagsToRemove": null
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "8cbcde6b-9fba-46ce-8c77-0c786d67a5ba",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Okay, yet another gate... this one has a bar across it, sealing it off from the other side. From what I can see, there's a corridor on the other side.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "e69ac576-455d-4eb2-9045-d0fda015117d",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Okay, yet another gate with slightly rusted hinges... this one has a bar across it, sealing it off from the other side. From what I can see, there's a corridor on the other side...",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": false,
                            "notes": ""
                        },
                        {
                            "type": "options.text",
                            "id": "0788f233-18b6-4d3b-8c10-86f3b64086e3",
                            "text": "Listen at the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "listened",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "id": "4fa7a12b-63ab-4739-aadc-088081ca1270",
                                                    "type": "nodes.skillBranch",
                                                    "skill": "Perception",
                                                    "target": "20",
                                                    "success": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "6b5893cf-538f-4b9a-8b44-bb031355e925",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "I really can't make out any noise on the other side... maybe it's an empty room.",
                                                                "emotion": "0",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0",
                                                                "notes": ""
                                                            }
                                                        ]
                                                    },
                                                    "failure": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "d34d48fc-5284-49b9-950c-3668568c18b8",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Nothing. I'm obviously lousy at listening.",
                                                                "emotion": "2",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0",
                                                                "notes": ""
                                                            }
                                                        ]
                                                    },
                                                    "notify": true
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "bc22bde0-4b61-40a6-9a42-a633cbddb65b",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "listened",
                                                    "tagsToRemove": null
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "f3a88ad8-a79d-4d4e-ac58-071d58bcd2e2",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I can't tell if there's anything behind it or not.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false,
                            "notes": ""
                        },
                        {
                            "type": "options.text",
                            "id": "ff2a0f43-9e2f-4f5d-b0f4-0f60a3d5ff79",
                            "text": "Open the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "opened",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "8ed32f5f-4815-4d14-bce4-fd8d9e69ef1b",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "opened",
                                                    "tagsToRemove": null
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "dc566599-8637-481c-91a4-4281636d618a",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I'll have to release the bar across it before I can open this gate.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "ReachOut"
                                                },
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "locker_open.wav",
                                                    "wait": false
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "aa7ca4e3-c6c0-4340-9e04-e8aa0959fc24",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "There, now I can go through it.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "wooden_door_opening.wav",
                                                    "wait": false
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "WineCellarDoor.wav",
                                                    "wait": false
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "f65ca771-b3c8-4012-8977-4ad71ec50060",
                                    "scope": "prop",
                                    "scopeId": "af11645b-9c6d-4f5e-9c89-6f980d62aedb",
                                    "scopeFilterId": "b403b96f-e954-4aa2-948b-9fdd998bc395",
                                    "tagsToAdd": "Opened",
                                    "tagsToRemove": null
                                },
                                {
                                    "type": "nodes.changeScene",
                                    "sceneId": "a670cb9b-f14e-4b92-b052-fbb75035f7fe",
                                    "spawnId": "c13906a1-705c-48f9-b0d5-8e1b54619eaa",
                                    "fadeTime": 2
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false,
                            "notes": ""
                        },
                        {
                            "type": "options.text",
                            "id": "86492102-3413-42b5-966d-0bc9f80366f4",
                            "text": "Oil the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inInventory",
                                                "propId": "fcebe2a5-5808-486b-b633-ebc832524930",
                                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "e551d74a-6aeb-48b8-a44f-f7dc6becae96",
                                                    "scriptId": "e5a82559-e549-4aa7-a669-cf0f8abbaef4",
                                                    "entryPointId": "2af23058-e83d-42f7-9098-8ac6b9790c73",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "ed35ae16-3275-446a-b4a9-a44219019c28",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Okay, a little oil on the hinges and on the bar should make this easier to open - and much quieter.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "feeab75f-3837-43d1-a9e4-f00b710bb5df",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "oiled",
                                                    "tagsToRemove": null
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "8021987b-2ffc-4ba6-ab57-96eb86ad217b",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "That's a fine idea. Now if I could only get some oil from somewhere...",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "oiled",
                                    "has": false
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "examined",
                                    "has": true
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false,
                            "notes": ""
                        },
                        {
                            "type": "options.text",
                            "id": "606c0988-3266-49f4-aaa6-f42d79f08ad5",
                            "text": "Sense Magic",
                            "nodes": [
                                {
                                    "type": "nodes.invokeScript",
                                    "id": "b6f4d22c-57e5-4c34-9695-824f8bdb1492",
                                    "scriptId": "533e1ce1-13d3-439f-8544-dbdf808d30c4",
                                    "entryPointId": "2af23058-e83d-42f7-9098-8ac6b9790c73",
                                    "currentScope": "Scenes",
                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                    "currentActorId": null,
                                    "currentStoryEventId": null,
                                    "currentPropId": null
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "actor",
                                "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                "scopeFilterId": null,
                                "tags": "SenseMagic",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false,
                            "notes": ""
                        }
                    ],
                    "AutoAddDone": true,
                    "Unique": false
                }
            ]
        }
    ]
}