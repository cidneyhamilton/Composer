{
    "type": "script",
    "id": "9b11ae66-26ab-4fb7-9e05-f4e2b2ac2ea0",
    "name": "Interact_Exit_BarrelMaking",
    "sceneId": "a670cb9b-f14e-4b92-b052-fbb75035f7fe",
    "propId": "01c29f14-e0ec-4619-8ec0-5b615ff79ee2",
    "actorId": null,
    "trigger": {
        "type": "triggers.interact",
        "name": "Interact"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "3792ec10-53b7-45ba-8c06-3ac08cfd9765",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.showMenu",
                    "id": "ca7564d5-282a-4bc7-bf17-8a8c41a762f6",
                    "options": [
                        {
                            "type": "options.text",
                            "id": "68e3dff4-5202-47be-aad5-043ed1da93a5",
                            "text": "Examine the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.changeTags",
                                    "id": "a994cbd3-e11d-4b25-a2c3-d1d8f99cc72e",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "examinedfirst",
                                    "tagsToRemove": null
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "b9e59045-7461-4f4d-9458-f3bb54a08f8f",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "It looks like a solid metal gate. Hmmm... I'm beginning to sense a pattern here.",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "oiled",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "453f8cc7-2084-401b-895a-1d17e7a16906",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "It's almost rusted shut and will probably be noisy when I open it.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "291e8ad9-6fc8-4f44-985e-8c35b4172f24",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "And I can see movement on the other side... Surprise! I see a Drat.",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": false,
                            "minutes": "2",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "03691461-9e5a-436c-aac8-784506c83d2d",
                            "text": "Oil the Hinges",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inInventory",
                                                "propId": "fcebe2a5-5808-486b-b633-ebc832524930",
                                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "c600b202-0cc3-4ff3-8a8b-11adb987732f",
                                                    "scriptId": "e5a82559-e549-4aa7-a669-cf0f8abbaef4",
                                                    "entryPointId": "3792ec10-53b7-45ba-8c06-3ac08cfd9765",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "54653944-8a2d-4ef4-a2c6-0c04aa383df3",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Let's see if I can oil the hinges and the latch so it won't be so hard to open... and not so noisy when I open it.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "2f5194a4-5c77-4cb8-a96e-77a77c7ddb25",
                                                    "scope": "target",
                                                    "scopeId": "01c29f14-e0ec-4619-8ec0-5b615ff79ee2",
                                                    "scopeFilterId": "a670cb9b-f14e-4b92-b052-fbb75035f7fe",
                                                    "tagsToAdd": "oiled",
                                                    "tagsToRemove": null
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "da841625-6cf6-4e62-b7e6-7d8d3c9591ce",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "If I had some oil, this would be a good place to use it.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "examinedfirst",
                                    "has": true
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "target",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "oiled",
                                    "has": false
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "c594390b-d41b-4ac0-8647-9e4c6aa8e190",
                            "text": "Open the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "prop",
                                                "scopeId": "01c29f14-e0ec-4619-8ec0-5b615ff79ee2",
                                                "scopeFilterId": "a670cb9b-f14e-4b92-b052-fbb75035f7fe",
                                                "tags": "oiled",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "7b45d451-e740-4a95-aa6c-402463bdaac0",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "All right... next room, please.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "ReachOut"
                                                },
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "WineCellarDoor.wav",
                                                    "wait": false
                                                },
                                                {
                                                    "type": "nodes.changeScene",
                                                    "sceneId": "27f9108a-26aa-498b-b5b6-f98e8d0ec519",
                                                    "spawnId": "0e5738a4-6b2e-4011-94c6-150c6f248c23",
                                                    "fadeTime": 2
                                                },
                                                {
                                                    "type": "nodes.endScript"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.onceOnly",
                                                    "id": "96c37db0-992d-4f7f-bcc9-3256c277b4e9",
                                                    "nodes": [
                                                        {
                                                            "type": "nodes.speak",
                                                            "id": "ca1b47f4-3291-4841-be01-719934528617",
                                                            "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                            "actorId2": null,
                                                            "text": "Okay, hopefully, this won't make <i>too</i> much noise.",
                                                            "emotion": "0",
                                                            "emotion2": "0",
                                                            "device": "0",
                                                            "device2": "0"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "ReachOut"
                                                },
                                                {
                                                    "type": "nodes.onceOnly",
                                                    "id": "d0922de7-7c59-40f2-b0dd-4925a53b30a4",
                                                    "nodes": [
                                                        {
                                                            "type": "nodes.speak",
                                                            "id": "489b5021-5bc1-4bbd-a679-b1b2eff71220",
                                                            "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                            "actorId2": null,
                                                            "text": "Onward, ever onward...",
                                                            "emotion": "0",
                                                            "emotion2": "0",
                                                            "device": "0",
                                                            "device2": "0"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "wooden_door_opening.wav",
                                                    "wait": false
                                                },
                                                {
                                                    "type": "nodes.changeScene",
                                                    "sceneId": "27f9108a-26aa-498b-b5b6-f98e8d0ec519",
                                                    "spawnId": "0e5738a4-6b2e-4011-94c6-150c6f248c23",
                                                    "fadeTime": 2
                                                },
                                                {
                                                    "type": "nodes.endScript"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": 0,
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "7c63c199-dfb7-42d0-a7f4-2ed300adc05f",
                            "text": "Listen at the Gate",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "target",
                                                "scopeId": null,
                                                "scopeFilterId": null,
                                                "tags": "hasListenedToday",
                                                "has": true
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "d680ca7b-490e-442b-929f-c977f7650ecc",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "This is getting boring.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "0971657c-a374-440c-9e95-9cda3d5be583",
                                                    "scope": "target",
                                                    "scopeId": null,
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "hasListenedToday",
                                                    "tagsToRemove": null
                                                },
                                                {
                                                    "type": "nodes.incrementTime",
                                                    "id": "40b29793-8dec-46d4-a9bc-a10de03e2e0d",
                                                    "days": 0,
                                                    "hours": 0,
                                                    "minutes": "5"
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "KneelDown",
                                                    "wait": true
                                                },
                                                {
                                                    "id": "c7f51ac3-8e18-4499-a814-496cf971be6e",
                                                    "type": "nodes.skillBranch",
                                                    "skill": "Perception",
                                                    "target": "25",
                                                    "success": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "669e3201-ccba-4174-a365-7cb3ad6da653",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "I hear Drats... more than one. Maybe more than two... I'd better be prepared for a fight.",
                                                                "emotion": "0",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    },
                                                    "failure": {
                                                        "type": "nodes.block",
                                                        "nodes": [
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "aa456bcb-d7b1-42d6-a95b-02f143297221",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "Well, I don't hear a brass band on the other side...",
                                                                "emotion": "0",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            },
                                                            {
                                                                "type": "nodes.speak",
                                                                "id": "b84b0958-1412-4cdf-859f-baa087c0902b",
                                                                "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                                "actorId2": null,
                                                                "text": "That doesn't mean there isn't one there. It just means my perception skills are a little on the poor side.",
                                                                "emotion": "1",
                                                                "emotion2": "0",
                                                                "device": "0",
                                                                "device2": "0"
                                                            }
                                                        ]
                                                    },
                                                    "notify": true
                                                },
                                                {
                                                    "type": "nodes.playAnimation",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "animationName": "KneelUp",
                                                    "wait": true
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": null,
                            "ignoreChildAvailability": true,
                            "minutes": "0",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "5a448d60-26ab-4cb6-b608-7c79b50da287",
                            "text": "Sense Magic",
                            "nodes": [
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inTags",
                                                "scope": "prop",
                                                "scopeId": "d33b5d32-e02c-47dc-9f62-b66d7e43fc11",
                                                "scopeFilterId": "27f9108a-26aa-498b-b5b6-f98e8d0ec519",
                                                "tags": "foundring",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "bc89d1b8-68e3-4ea7-bbf7-55c3eb782e6a",
                                                    "scriptId": "b1c2ecc1-eb00-49ed-a7ba-ea6af625c355",
                                                    "entryPointId": "",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "e0bad362-97ca-4dc5-b96b-b8b5ee39fee7",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I get the faint impression of magic somewhere in the other room.",
                                                    "emotion": "4",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.invokeScript",
                                                    "id": "6e9fffbc-e6c1-482e-920d-d270177f0922",
                                                    "scriptId": "533e1ce1-13d3-439f-8544-dbdf808d30c4",
                                                    "entryPointId": "5426b3ac-1c53-4bb3-870c-62c22fa3ab2e",
                                                    "currentScope": "Scenes",
                                                    "currentSceneId": "5f4c53b2-540d-4627-af71-7ede35c6d84b",
                                                    "currentActorId": null,
                                                    "currentStoryEventId": null,
                                                    "currentPropId": null
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "actor",
                                "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                "scopeFilterId": null,
                                "tags": "SenseMagic",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        }
                    ],
                    "AutoAddDone": true,
                    "Unique": false
                }
            ]
        }
    ]
}