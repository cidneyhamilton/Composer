{
    "type": "script",
    "id": "c4a67181-5af2-48b4-a36d-d291b330ed28",
    "name": "Safe Popup",
    "storyEventId": "32df3697-cde9-48af-82a6-51be5fc65db4",
    "sceneId": "212f8023-648d-45df-8f16-d56a7f081d41",
    "propId": null,
    "trigger": {
        "type": "triggers.manual",
        "name": "Manual"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "1847049e-61e4-4168-8ae9-17b785b5330a",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.turnActor",
                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                    "propId": "24f071b8-245e-4e7b-aa94-00e87b84ce45",
                    "wait": true,
                    "scope": "prop",
                    "targetActorId": null
                },
                {
                    "type": "nodes.branch",
                    "sections": [
                        {
                            "type": "nodes.branchSection",
                            "expression": {
                                "type": "expressions.inInventory",
                                "propId": "4da6de5e-e0fa-4c10-9334-d1b67b84f59a",
                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                "has": true
                            },
                            "nodes": [
                                {
                                    "type": "nodes.showCloseUp",
                                    "imageName": "opensecretpanel.png"
                                }
                            ]
                        },
                        {
                            "type": "nodes.branchSection",
                            "expression": null,
                            "nodes": [
                                {
                                    "type": "nodes.showCloseUp",
                                    "imageName": "opensecretpanelwithcoin.png"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "nodes.showMenu",
                    "id": "948d2263-4879-4429-82f7-872a25238845",
                    "options": [
                        {
                            "type": "options.text",
                            "id": "83afd1dc-8e8a-4251-8280-721541cb9bb1",
                            "text": "Examine the Safe",
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "16b3d7d2-a971-4af5-975c-8a0f10dd54a0",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "There's a hidden safe in the fireplace! Must take four keys to open it... or a set of thieves' tools. Shame I don't happen to have them.",
                                    "emotion": "2",
                                    "device": "0"
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "0dcde6e9-cc6d-462b-a89b-aeba96a99087",
                                    "scope": "script",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "examinedsafe",
                                    "tagsToRemove": null
                                },
                                {
                                    "type": "nodes.branch",
                                    "sections": [
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": {
                                                "type": "expressions.inInventory",
                                                "propId": "4da6de5e-e0fa-4c10-9334-d1b67b84f59a",
                                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                "has": false
                                            },
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "cbc599cc-92ea-4854-9148-c0997ce96975",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Wait, that medallion in the center of the safe looks like the Lucky Coin! If I can just pry it off, it will be my ticket to the Thieves' Guild.",
                                                    "emotion": "1",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "bb3258a2-566c-4fd2-8beb-22779d3f8a4f",
                                                    "scope": "actor",
                                                    "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "SawCoin",
                                                    "tagsToRemove": null
                                                }
                                            ]
                                        },
                                        {
                                            "type": "nodes.branchSection",
                                            "expression": null,
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "9b14be4f-01a6-4b54-8b0b-f1399fcd82ad",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "So what's so special that they keep it in a safe that has four locks? Clearly when I become a Master Thief, I'll have to come back to find out what is in that safe.",
                                                    "emotion": "0",
                                                    "device": "0"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "prop",
                                "scopeId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                "scopeFilterId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                "tags": "panelisopen",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "91b85caf-65cd-4ab8-a376-0d476f479e27",
                            "text": "Open the Safe",
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "dabc8b15-1ac7-454a-a56c-dbd5520c7d55",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "It's kinda hard to open a safe without the key, but maybe somebody forgot to lock them last time.",
                                    "emotion": "0",
                                    "device": "0"
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "a0d9e43a-ab74-4ed6-b12c-d9b6bdb5bb5b",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Nope, so much for that idea. No way I can get that door open.",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "0dcde6e9-cc6d-462b-a89b-aeba96a99087",
                                    "scope": "script",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tagsToAdd": "examinedsafe",
                                    "tagsToRemove": null
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "prop",
                                "scopeId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                "scopeFilterId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                "tags": "panelisopen",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "15e0e8ed-7f9a-477e-96c2-90d7977b3e29",
                            "text": "Take the Lucky Coin",
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "eeb47b92-453f-43e5-b739-dcf97ca1301f",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "If that's the Lucky Coin, it's really stuck on there. I can't get it loose. I'll need to find something to pry it off with.",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inInventory",
                                    "propId": "4da6de5e-e0fa-4c10-9334-d1b67b84f59a",
                                    "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                    "has": false
                                },
                                "right": {
                                    "type": "expressions.and",
                                    "left": {
                                        "type": "expressions.inTags",
                                        "scope": "script",
                                        "scopeId": null,
                                        "scopeFilterId": null,
                                        "tags": "examinedsafe",
                                        "has": true
                                    },
                                    "right": {
                                        "type": "expressions.inTags",
                                        "scope": "prop",
                                        "scopeId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                        "scopeFilterId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                        "tags": "panelisopen",
                                        "has": true
                                    }
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": false
                        },
                        {
                            "type": "options.text",
                            "id": "3b42e5b0-54e0-4bd6-9f2e-76ebff49d93f",
                            "text": "Use an Item to Get the Coin",
                            "nodes": [
                                {
                                    "type": "nodes.showMenu",
                                    "id": "c18917a0-8035-40f8-a1b0-67ef11ec3dcc",
                                    "options": [
                                        {
                                            "type": "options.text",
                                            "id": "f6ed0e05-2edc-4a8d-84e4-2c6e48ffb96e",
                                            "text": "Use a Sword to Get the Coin",
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "d9cb1761-9400-4b67-aa2b-9a856310c2bd",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Argh! I didn't bring a sword with me!",
                                                    "emotion": "3",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "40eb61e2-ff4e-406f-a006-2d0a545477e3",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I figured that a thief wouldn't wear a sword, 'cuz it might get caught on windowsills.",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ],
                                            "expression": null,
                                            "ignoreChildAvailability": true,
                                            "minutes": 0,
                                            "ExitMenu": false
                                        },
                                        {
                                            "type": "options.text",
                                            "id": "d0451cc1-11ad-401a-ae90-fb5f689400ef",
                                            "text": "Use a Dagger to Get the Coin",
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "66ef4dbc-a739-4b8f-800c-dd0bffcc965c",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Well,.. pff... I didn't bring a dagger. I didn't want to run the risk of getting caught with a weapon. ",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "33449a82-8aed-4229-b5f0-69c213733cbc",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I think the constables go a lot harder on armed robbers.",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ],
                                            "expression": null,
                                            "ignoreChildAvailability": true,
                                            "minutes": 0,
                                            "ExitMenu": false
                                        },
                                        {
                                            "type": "options.text",
                                            "id": "323e53fc-3608-41b8-8914-f5a54f3b6e71",
                                            "text": "Use a Crowbar to Get the Coin",
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "48ae043f-0ba0-4948-bd95-f3084b4193ab",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Even if I had a crowbar with me, I think using it to pry this Coin out would be... overkill.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ],
                                            "expression": null,
                                            "ignoreChildAvailability": true,
                                            "minutes": 0,
                                            "ExitMenu": false
                                        },
                                        {
                                            "type": "options.text",
                                            "id": "ee13d41f-6932-4a19-9152-87ee99dea11a",
                                            "text": "Use a Hairpin to Get the Coin",
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "7da11a27-4999-4a95-a6b1-10553737124b",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Oh, man... I wish I had a hairpin.",
                                                    "emotion": "2",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "bcbf1bac-c302-4d7a-b81f-a6090fd9fc9f",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "It just figures... the <i>one day</i> I decide to wear my hair down!",
                                                    "emotion": "3",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                }
                                            ],
                                            "expression": null,
                                            "ignoreChildAvailability": true,
                                            "minutes": 0,
                                            "ExitMenu": false
                                        },
                                        {
                                            "type": "options.text",
                                            "id": "90f45a3a-7c19-4fdd-b72e-d1bc3a03d760",
                                            "text": "Use the Letter Opener to Get the Coin",
                                            "nodes": [
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "e0fa135f-4baf-4a0e-bfd5-ffc2078cf6b5",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "I wonder if I can pry it off with the letter opener...",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.playSoundEffect",
                                                    "soundEffectName": "mechanical_clank.wav",
                                                    "wait": false
                                                },
                                                {
                                                    "type": "nodes.changeInventory",
                                                    "id": "11e43436-08de-457a-8597-eadbef9db1f7",
                                                    "propId": "4da6de5e-e0fa-4c10-9334-d1b67b84f59a",
                                                    "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                    "change": "1",
                                                    "count": 1,
                                                    "notify": true
                                                },
                                                {
                                                    "type": "nodes.showCloseUp",
                                                    "imageName": "opensecretpanel.png"
                                                },
                                                {
                                                    "type": "nodes.quests",
                                                    "id": "9b92d152-ff0e-40da-b15f-b0385905f6ae",
                                                    "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                                    "propId": "cef63196-40b1-459c-a964-f68d7f5125b6",
                                                    "target": "1",
                                                    "notify": true
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "c81a9ed3-9281-47e8-b9b8-854b2566f939",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Yeah, I got the Coin! I am SO good!",
                                                    "emotion": "1",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "0ff9aed7-f6b2-443e-9d55-f5c95e81ba94",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "actorId2": null,
                                                    "text": "Now I need to get out of here before someone wakes up and catches me.",
                                                    "emotion": "0",
                                                    "emotion2": "0",
                                                    "device": "0",
                                                    "device2": "0"
                                                },
                                                {
                                                    "type": "nodes.quests",
                                                    "id": "34b87d81-3587-44ec-afa5-33a8466703e3",
                                                    "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                                    "propId": "def44ccc-8e2b-46ba-970b-49efcd17718a",
                                                    "target": "0",
                                                    "notify": true
                                                }
                                            ],
                                            "expression": {
                                                "type": "expressions.inInventory",
                                                "propId": "afda46e2-af95-4485-913b-bc35097ad296",
                                                "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                                "has": true
                                            },
                                            "ignoreChildAvailability": false,
                                            "minutes": 0,
                                            "ExitMenu": true
                                        }
                                    ],
                                    "AutoAddDone": true,
                                    "Unique": false
                                }
                            ],
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "script",
                                    "scopeId": null,
                                    "scopeFilterId": null,
                                    "tags": "examinedsafe",
                                    "has": true
                                },
                                "right": {
                                    "type": "expressions.and",
                                    "left": {
                                        "type": "expressions.inTags",
                                        "scope": "prop",
                                        "scopeId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                        "scopeFilterId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                        "tags": "panelisopen",
                                        "has": true
                                    },
                                    "right": {
                                        "type": "expressions.inInventory",
                                        "propId": "4da6de5e-e0fa-4c10-9334-d1b67b84f59a",
                                        "sceneId": "a2508b7e-a177-4a96-93bd-4d8ab88dffc4",
                                        "has": false
                                    }
                                }
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "5",
                            "ExitMenu": true
                        },
                        {
                            "type": "options.text",
                            "id": "93350316-b670-4bf2-84f4-45ae4fb34827",
                            "text": "Close the Secret Panel",
                            "nodes": [
                                {
                                    "type": "nodes.hideCloseUp",
                                    "waitForSeconds": 1
                                },
                                {
                                    "type": "nodes.changePropVisibility",
                                    "id": "70c8682d-d333-4a5d-a40c-af1a2cf86111",
                                    "propId": "24f071b8-245e-4e7b-aa94-00e87b84ce45",
                                    "sceneId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                    "status": "Hidden",
                                    "wait": true
                                },
                                {
                                    "type": "nodes.changePropVisibility",
                                    "id": "c35fab24-485f-4cef-902d-b1413564fa11",
                                    "propId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                    "sceneId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                    "status": "Closing",
                                    "wait": true
                                },
                                {
                                    "type": "nodes.changeTags",
                                    "id": "3b09ade3-8021-4587-abde-f303fab788f7",
                                    "scope": "prop",
                                    "scopeId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                    "scopeFilterId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                    "tagsToRemove": "panelisopen"
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "945425b9-3e4b-4eee-b515-3c54394d8c41",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "The secret panel is now closed and practically invisible against the fireplace mantel design. They'll never know I found it.",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0"
                                },
                                {
                                    "type": "nodes.endScript"
                                }
                            ],
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "prop",
                                "scopeId": "0ed72d17-0f1f-4d12-9af3-1d0ff76a0053",
                                "scopeFilterId": "212f8023-648d-45df-8f16-d56a7f081d41",
                                "tags": "panelisopen",
                                "has": true
                            },
                            "ignoreChildAvailability": true,
                            "minutes": "2",
                            "ExitMenu": true
                        }
                    ],
                    "AutoAddDone": true,
                    "Unique": false
                },
                {
                    "type": "nodes.hideCloseUp",
                    "waitForSeconds": 1
                }
            ]
        }
    ]
}