{
    "type": "script",
    "id": "e159dcfd-55cc-432d-95ae-8cd363603b8d",
    "name": "Zac Barrier",
    "sceneId": "e8606d3d-9743-4b44-a3b3-117a393b42ae",
    "actorId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
    "trigger": {
        "type": "triggers.manual",
        "name": "Manual"
    },
    "entryPoints": [
        {
            "type": "scripts.entryPoint",
            "id": "17e729de-234d-4f27-b419-55765b259eb3",
            "name": "Main",
            "nodes": [
                {
                    "type": "nodes.comment",
                    "message": "Added BottledUp tag check so the Wraith doesn't talk if you defeat it prior to reaching the barrier",
                    "commentor": "Charles"
                },
                {
                    "type": "nodes.branch",
                    "sections": [
                        {
                            "type": "nodes.branchSection",
                            "expression": {
                                "type": "expressions.and",
                                "left": {
                                    "type": "expressions.inTags",
                                    "scope": "actor",
                                    "scopeId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                    "scopeFilterId": null,
                                    "tags": "barrierTaunt",
                                    "has": false
                                },
                                "right": {
                                    "type": "expressions.inTags",
                                    "scope": "actor",
                                    "scopeId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                    "scopeFilterId": null,
                                    "tags": "BottledUp",
                                    "has": false
                                }
                            },
                            "nodes": [
                                {
                                    "type": "nodes.changeTags",
                                    "id": "9c102323-9348-4276-9b6e-7170cb09ef76",
                                    "scope": "actor",
                                    "scopeId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                    "scopeFilterId": null,
                                    "tagsToAdd": "barrierTaunt, Encountered",
                                    "tagsToRemove": null
                                },
                                {
                                    "type": "nodes.invokeScript",
                                    "id": "da9e89e5-674a-42d3-ade7-2921a4c12695",
                                    "scriptId": "e159dcfd-55cc-432d-95ae-8cd363603b8d",
                                    "entryPointId": "3111363a-6f15-4ac3-8e37-42293f46b0f9",
                                    "currentScope": "Current",
                                    "currentSceneId": null,
                                    "currentActorId": null,
                                    "currentStoryEventId": null,
                                    "currentPropId": null
                                },
                                {
                                    "type": "nodes.wait",
                                    "waitForSeconds": "0.5"
                                },
                                {
                                    "type": "nodes.comment",
                                    "message": "Just adding a way to play an animation for the WraithKing",
                                    "commentor": "Joshua"
                                },
                                {
                                    "type": "nodes.invokeCommand",
                                    "id": "62a0da45-f5e3-46d6-8682-585533caf6e3",
                                    "entityType": "prop",
                                    "entityFilterId": "e8606d3d-9743-4b44-a3b3-117a393b42ae",
                                    "entityId": "9e184e21-10a8-433c-be9b-7aaec7bcfb1b",
                                    "command": "castspell",
                                    "wait": true,
                                    "resultVariableScope": "script"
                                },
                                {
                                    "type": "nodes.turnActor",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "propId": "96280212-e39a-438f-88a6-2981e48a2933",
                                    "scope": "prop",
                                    "targetActorId": null
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "f0bef02c-78c6-467a-998f-500a2fd4c872",
                                    "actorId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                    "actorId2": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "text": "Oh, no, no, no you don't. I've got that little snack trapped back there. He's all mine now. ",
                                    "emotion": "1",
                                    "emotion2": "4",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.turnActor",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "propId": "785ebb3b-01af-464d-81f1-9cf02ebdd4b2",
                                    "scope": "prop",
                                    "targetActorId": null
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "4979348c-284d-45ca-9fe4-1dc3139b117b",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                    "text": "(yell) Joel! Joel, are you there?",
                                    "emotion": "3",
                                    "emotion2": "4",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "841465c7-bdb3-4122-9147-9e62bad2bf51",
                                    "actorId": "4b05c425-ca25-4abb-9a36-7d793370842f",
                                    "actorId2": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "text": "Shawn? Nooooo, run away. Run!",
                                    "emotion": "2",
                                    "emotion2": "4",
                                    "device": "1",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.showMenu",
                                    "id": "40859712-9bdd-4463-8204-020cbc34dd20",
                                    "options": [
                                        {
                                            "type": "options.text",
                                            "id": "2edc7b9e-1d1f-49d1-80c3-4119ffe1f88f",
                                            "text": "Run Away",
                                            "nodes": [
                                                {
                                                    "type": "nodes.comment",
                                                    "message": "Add option to run away from combat.",
                                                    "commentor": "Cidney"
                                                },
                                                {
                                                    "type": "nodes.changeTags",
                                                    "id": "d61ed87a-94c5-4841-88de-4670964cfe28",
                                                    "scope": "actor",
                                                    "scopeId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "scopeFilterId": null,
                                                    "tagsToAdd": "combat_escape",
                                                    "tagsToRemove": null
                                                },
                                                {
                                                    "type": "nodes.branch",
                                                    "sections": [
                                                        {
                                                            "type": "nodes.branchSection",
                                                            "expression": {
                                                                "type": "expressions.inTags",
                                                                "scope": "prop",
                                                                "scopeId": "b50de0b0-b4da-4646-b697-992bef2b072e",
                                                                "scopeFilterId": "ed2b858e-927a-44b9-86ee-4d3fe4dcfc33",
                                                                "tags": "opened",
                                                                "has": true
                                                            },
                                                            "nodes": [
                                                                {
                                                                    "type": "nodes.comment",
                                                                    "message": "If the player unbarred the door to the Catacombs from the UC...",
                                                                    "commentor": "Cidney"
                                                                },
                                                                {
                                                                    "type": "nodes.changeScene",
                                                                    "sceneId": "ed2b858e-927a-44b9-86ee-4d3fe4dcfc33",
                                                                    "spawnId": "b50de0b0-b4da-4646-b697-992bef2b072e",
                                                                    "fadeTime": 2
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "nodes.branchSection",
                                                            "expression": null,
                                                            "nodes": [
                                                                {
                                                                    "type": "nodes.changeScene",
                                                                    "sceneId": "298ff758-e1ce-477a-b9d4-da614b74072d",
                                                                    "spawnId": "06ebd2b5-3188-4390-9284-c0c09b82cb51",
                                                                    "fadeTime": 2
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ],
                                            "expression": null,
                                            "ignoreChildAvailability": true,
                                            "minutes": 0,
                                            "ExitMenu": true,
                                            "notes": ""
                                        },
                                        {
                                            "type": "options.text",
                                            "id": "f95689e0-bef2-49a0-bbc0-af2de4696f0a",
                                            "text": "Face the Wraith",
                                            "nodes": [
                                                {
                                                    "type": "nodes.turnActor",
                                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "propId": "96280212-e39a-438f-88a6-2981e48a2933",
                                                    "scope": "prop",
                                                    "targetActorId": null
                                                },
                                                {
                                                    "type": "nodes.speak",
                                                    "id": "6d670019-4633-4359-afea-9e91bebe38e0",
                                                    "actorId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                                    "actorId2": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                                    "text": "You aren't going to run - you're just going to Die!",
                                                    "emotion": "3",
                                                    "emotion2": "4",
                                                    "device": "0",
                                                    "device2": "0",
                                                    "notes": ""
                                                },
                                                {
                                                    "type": "nodes.invokeCommand",
                                                    "id": "d4c9a646-db44-4177-8a83-22733bf2196c",
                                                    "entityType": "prop",
                                                    "entityFilterId": "e8606d3d-9743-4b44-a3b3-117a393b42ae",
                                                    "entityId": "96280212-e39a-438f-88a6-2981e48a2933",
                                                    "command": "startcombat",
                                                    "resultVariableScope": "script"
                                                }
                                            ],
                                            "expression": null,
                                            "ignoreChildAvailability": true,
                                            "minutes": 0,
                                            "ExitMenu": true,
                                            "notes": ""
                                        }
                                    ],
                                    "AutoAddDone": false,
                                    "Unique": true
                                }
                            ]
                        },
                        {
                            "type": "nodes.branchSection",
                            "expression": {
                                "type": "expressions.inTags",
                                "scope": "actor",
                                "scopeId": "fb00cd5f-e210-44b2-bc7d-5384a9a3db74",
                                "scopeFilterId": null,
                                "tags": "BottledUp",
                                "has": true
                            },
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "c166baab-63ea-4c35-b303-05f7cdeb5dae",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Joel! Joel - are you there?",
                                    "emotion": "4",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "9fedf9f4-5845-47a6-921c-a6f82b20355d",
                                    "actorId": "4b05c425-ca25-4abb-9a36-7d793370842f",
                                    "actorId2": null,
                                    "text": "Shawn - the Wraith...",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "539e5075-cb64-4381-a38e-9d21138e54fb",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "I've defeated the Wraith - But this magical barrier is still up. I can't get to you.",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.quests",
                                    "id": "1be1d869-0aa1-4303-8920-ef51fa97a48f",
                                    "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                    "propId": "5e54bcb0-dac3-4345-b9bc-1862233c666c",
                                    "target": "0",
                                    "notify": true
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "08b808a3-59e2-427b-9482-d0a2dcc722f3",
                                    "actorId": "4b05c425-ca25-4abb-9a36-7d793370842f",
                                    "actorId2": null,
                                    "text": "You must destroy the Wraith's phylactery... it's the only way to break the spell... The pool room...",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "a54b2af5-1b8a-4924-8f50-aeecc6b28b23",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Phylactery? What's that?",
                                    "emotion": "4",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "0851a5b3-1bbf-413c-87b1-60d15f51983c",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Joel? Joel - can you hear me? Are you still there?",
                                    "emotion": "6",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "12cb1a2a-4c40-4538-a286-8ea530bf40a6",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "I hope I'm not too late...",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                }
                            ]
                        },
                        {
                            "type": "nodes.branchSection",
                            "expression": null,
                            "nodes": [
                                {
                                    "type": "nodes.speak",
                                    "id": "8374efc6-9bfa-4716-b4c8-f4b06bd493fa",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "(yell) Joel! Hold on. I'll find a way to save you.",
                                    "emotion": "3",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.invokeScript",
                                    "id": "be9f6c4b-973e-4c92-a046-aaef2bc0817a",
                                    "scriptId": "e159dcfd-55cc-432d-95ae-8cd363603b8d",
                                    "entryPointId": "3111363a-6f15-4ac3-8e37-42293f46b0f9",
                                    "currentScope": "Current",
                                    "currentSceneId": null,
                                    "currentActorId": null,
                                    "currentStoryEventId": null,
                                    "currentPropId": null
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "6a0ad528-426c-453d-ade3-6da0a9d30a9d",
                                    "actorId": "4b05c425-ca25-4abb-9a36-7d793370842f",
                                    "actorId2": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "text": "The Wraith... don't let the Wraith get you...",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "1",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "d579a34d-9e93-446e-ab97-b9db6214fab0",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "(yell) Don't worry, I've got this. Just try not to die.",
                                    "emotion": "0",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "933287d1-cf93-4c41-9de2-44164dc9ddde",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "(yell) Joel? Joel!",
                                    "emotion": "4",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.speak",
                                    "id": "de686a84-f78a-45c9-ad43-7638457c7a25",
                                    "actorId": "30ee2636-15e3-452e-a2db-09cbb9012970",
                                    "actorId2": null,
                                    "text": "Please don't die...",
                                    "emotion": "2",
                                    "emotion2": "0",
                                    "device": "0",
                                    "device2": "0",
                                    "notes": ""
                                },
                                {
                                    "type": "nodes.invokeCommand",
                                    "id": "194433e2-d7aa-4858-98b7-f79406ccdf78",
                                    "entityType": "prop",
                                    "entityFilterId": "e8606d3d-9743-4b44-a3b3-117a393b42ae",
                                    "entityId": "96280212-e39a-438f-88a6-2981e48a2933",
                                    "command": "startcombat",
                                    "resultVariableScope": "script"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "nodes.branch",
                    "sections": [
                        {
                            "type": "nodes.branchSection",
                            "expression": {
                                "type": "expressions.hasActiveQuest",
                                "propId": "e4a689aa-45c2-4d62-8ade-1e0ae72c0f00",
                                "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                "questStatus": "0"
                            },
                            "nodes": [
                                {
                                    "type": "nodes.quests",
                                    "id": "2582776e-04fe-40e4-9d82-5955970ed845",
                                    "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                    "propId": "e4a689aa-45c2-4d62-8ade-1e0ae72c0f00",
                                    "target": "1",
                                    "notify": true
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "nodes.branch",
                    "sections": [
                        {
                            "type": "nodes.branchSection",
                            "expression": {
                                "type": "expressions.hasActiveQuest",
                                "propId": "63c9eaa8-929d-4dd5-ad28-2ff7c908fefe",
                                "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                "questStatus": "7"
                            },
                            "nodes": [
                                {
                                    "type": "nodes.quests",
                                    "id": "34407c5c-e0de-42ec-845e-8be817b7904d",
                                    "sceneId": "e8520824-d970-4c6e-8aec-6c308c8846ab",
                                    "propId": "63c9eaa8-929d-4dd5-ad28-2ff7c908fefe",
                                    "target": "0",
                                    "notify": true
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "scripts.entryPoint",
            "id": "3111363a-6f15-4ac3-8e37-42293f46b0f9",
            "name": "SpawnBarrierWraith",
            "nodes": [
                {
                    "type": "nodes.invokeCommand",
                    "id": "400793bf-ca29-4b61-9642-93bcc5bf16b1",
                    "entityType": "prop",
                    "entityFilterId": "e8606d3d-9743-4b44-a3b3-117a393b42ae",
                    "entityId": "ac403295-df6a-4ad7-bbc4-547437353c25",
                    "command": "despawn",
                    "resultVariableScope": "script"
                },
                {
                    "type": "nodes.playSoundEffect",
                    "soundEffectName": "magic_teleport.wav",
                    "wait": false
                },
                {
                    "type": "nodes.invokeCommand",
                    "id": "64ca2dfa-9b9e-453e-a56d-65933216c616",
                    "entityType": "prop",
                    "entityFilterId": "e8606d3d-9743-4b44-a3b3-117a393b42ae",
                    "entityId": "96280212-e39a-438f-88a6-2981e48a2933",
                    "command": "spawn",
                    "resultVariableScope": "script"
                }
            ]
        }
    ]
}